<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta property="og:locale" content="en_US">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <meta name="description" content="View what information websites can see without user activation">
    <meta property="og:image:width" content="750">
    <meta property="og:image:height" content="500">
    <meta property="og:image:type" content="image/*">
    <meta name="color-scheme" content="dark">
    <meta property="og:type" content="website">
    <meta property="og:image" content="YOUR ICON HERE">
    <meta property="og:url" content="https://addsoupbase.github.io/randomstuff/privacy">
    <meta property="og:description" content="View what information websites can see without user activation">
    <meta property="og:title" content="Web Privacy">
    <meta property="og:site_name" content="Web Privacy">
    <meta name="twitter:title" content="Web Privacy">
    <meta name="twitter:description" content="View what information websites can see without user activation">
    <meta name="twitter:url" content="https://addsoupbase.github.io/randomstuff/privacy">
    <meta name="twitter:creator" content="addsoupbase">
    <meta name="twitter:image" content="YOUR ICON HERE">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="profile:username" content="addsoupbase">
    <!-- 'summary_large_image', 'summary', 'app', or 'player' -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="robots" content="index">
    <meta name="theme-color" content="YOUR COLOR HERE">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="author" content="addsoupbase">
    <link rel="canonical" href="https://addsoupbase.github.io/randomstuff/privacy">
    <link rel="apple-touch-icon" sizes="57x57" href="./apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon-180x180.png">
    <!-- ^ can't be transparent -->
    <meta name="mobile-web-app-capable" content="no">
    <meta name="apple-mobile-web-app-capable" content="no">
    <!-- ^ yes if the site has stuff like back buttons -->
    <meta name="apple-mobile-web-app-title" content="Web Privacy">
    <link rel="apple-touch-startup-image" href="favicon.ico">
    <!-- <script src="../../css.js" blocking="render"></script> -->
    <!-- <script src="../../css_bad.js" nomodule></script> -->
    <title>Web Privacy</title>
    <!-- https://ogp.me/ https://developer.x.com/en/docs/x-for-websites/cards/overview/markup -->
</head>
<body>
    <style>
        .sect {
            border: 1px solid white;
            padding: 10px;
            margin: 5px;
        }

        html {
            color-scheme: dark;
        }

        .sect:empty {
            border: none;
            margin: 0;
            padding: 0;
        }

        /* .sect:hover {
            background-color: grey;
        } */
        .sect:empty::after {
            content: "None"
        }

        :root {
            word-break: break-word;
            font-family: arial, sans-serif;
        }

        :is(h1, h2, h3, h4, h5, h6)::first-letter {
            text-transform: capitalize;
        }

        .prop {
            margin-top: 7px;
            margin-bottom: 7px;
            display: inlines;
        }

        body {
            margin-right: 0;
            margin-top: 0;
        }

        @supports not (color-scheme: dark) {
            body {
                color: white;
                background-color: rgb(18, 18, 18);
            }
        }

        /* .sect:hover {
            background-color: highlight;
        }

        .sect:hover .sect {
            background-color: initial;
        }*/
        .changed {
            animation: flash .5s ease 1 .1s
        }

        @keyframes flash {
            0% {
                color: currentColor
                    /* text-shadow: 0px 0px 0px rgb(255, 255, 255); */
            }

            50% {
                color: rgb(54, 218, 255)
                    /* text-shadow: 0px 0px 10px lightblue; */
            }

            100% {
                color: currentColor
                    /* text-shadow: 0px 0px 0px rgb(255, 255, 255); */
            }
        }

        [title] b {
            text-decoration: underline dotted;
            text-underline-offset: 3px;
        }
    </style>
    <button id="redo" style="cursor:pointer; position: sticky;top: 0;left: 100%;padding:5px;">Refresh</button>
    <main>
        <h1>Privacy</h1>
        <div style="display: grid;">
            <small>Note: some information may be incorrect</small>
        </div>
        <h1>Available:</h1>
        <div class="sect" id="y"></div>
        <h1>Unavailable:</h1>
        <div class="sect" id="n"></div>
    </main>
    <script>
        !function (D) {
            'use strict'
            var redo = D.getElementById('redo')
            redo.onclick = go
            var yes = D.getElementById('y')
            var no = D.getElementById('n')
            document.domain = document.domain
            var prefixes = ['', 'webkit', 'moz', 'o', 'ms']
            var main = D.querySelector('main')
            main.addEventListener('animationend', function (e) {
                e.target.classList.remove('changed')
            })
            main.addEventListener('touchstart', function (e) {
                var t = e.target
                if (t.title || (t = t.parentNode).title) alert(t.textContent.match(/\w+/) + ': ' + t.title)
            })
            go()
            function getLabel(t) { return t.toString().slice(8, -1) }
            function go() {
                function addEvent(target, event, val, func) {
                    target = this || target
                    var i = 0
                    var ev = 'on' + event
                    if (ev in target) {
                        if (!func) val.nextElementSibling.textContent = 'Detected: ' + i++
                        target[ev] = function (e) {
                            (func || fallback)(e)
                            val.classList.add('changed')
                        }
                        var fallback = function () {
                            val.nextElementSibling.textContent = 'Detected: ' + i++
                        }
                    }
                    else {
                        reject(getLabel(target) + '.' + ev)
                        var p = val.parentElement
                        p.removeChild(val.nextElementSibling)
                        p.removeChild(val)
                    }
                }
                var old = D.documentElement.scrollTop
                setTimeout(function () {
                    D.documentElement.scrollTop = old
                })
                no.textContent =
                    yes.textContent = ''
                function defaultProp(sect, root, prop) {
                    root = root || ''
                    for (var i = prefixes.length; i--;) {
                        var prefix = prefixes[i]
                        var newProp = prop
                        if (prefix)
                            newProp = prefix + prop.charAt(0).toUpperCase() + prefix.substring(1)
                        if (newProp in this) {
                            var hint
                            var val = this[newProp]
                            if (getLabel(this) === 'NetworkInformation') switch (newProp) {
                                case 'downlink': {
                                    hint = 'The effective bandwidth estimate in megabits per second'
                                    val += 'Mb/s'
                                }
                                    break
                                case 'rtt':
                                    hint = 'The estimated effective round-trip time of the current connection'
                                    val += 'ms'
                                    break
                            }
                            addProp(sect, newProp, val, hint)
                            return
                        }
                    }
                    reject(prop + root)
                }
                function reject(name, reason) {
                    var n = addProp(no, name, reason || 'Unsupported')
                    // n.style.textDecoration = 'line-through'
                }
                function addProp(sect, name, value, hint) {
                    var n = D.createElement('div')
                    var na = D.createElement('b')
                    na.textContent = name + ': '
                    n.appendChild(na)
                    var val = D.createElement(value === '' || value === 'Unsupported' ? 'span' : 'samp')
                    if (value === '') value = '(empty string)'
                    n.className = 'prop'
                    /*if (/^https?:\/\//.test(value)) {
                        var anchor = D.createElement('a')
                        anchor.href = anchor.textContent = anchor.title = value
                        anchor.target = '_blank'
                        val.appendChild(anchor)
                    }
                    else */val.textContent = value
                    n.appendChild(val)
                    sect.appendChild(n)
                    if (hint) {
                        n.title = hint
                        n.style.cursor = 'help'
                    }
                    return na
                }
                function addSect(title, base) {
                    var n = D.createElement('div')
                    n.className = 'sect'
                    n.id = title
                    var el = base || yes
                    el.appendChild(n)
                    var t = D.createElement('h' + Math.min(depth(el), 6))
                    t.textContent = title
                    n.parentNode.insertBefore(t, n)
                    return n
                }
                function depth(e) {
                    var i = 0
                    var e = e.parentElement
                    while (e) {
                        ++i
                        e = e.parentElement
                    }
                    return i
                }
                var windowSect = addSect('window')
                var windowProps = ['orientation', 'innerWidth', 'innerHeight', 'outerWidth', 'outerHeight',
                    'screenX',
                    'screenY',
                    'pageXOffset',
                    'pageYOffset',
                    'mozInnerScreenX',
                    'mozInnerScreenY',
                    'scrollMaxX',
                    'scrollMaxY',
                    'scrollX',
                    'scrollY',
                    'screenLeft',
                    'screenTop',
                    'doNotTrack',
                    'credentialless',
                    'fullScreen',
                    'isSecureContext',
                    'offscreenBuffering',
                    'devicePixelRatio',
                    //'top', 'parent', 
                    'locationbar', 'menubar', 'personalbar', 'statusbar', 'toolbar', 'scrollbars',
                    'originAgentCluster'].sort()
                windowProps.forEach(function (prop) {
                    if (prop in window) {
                        var val = window[prop]
                        var hint
                        if (val instanceof BarProp) {
                            val = val.visible
                        }
                        else switch (prop) {
                            case 'orientation':
                                val += '°'
                                break
                            case 'outerWidth':
                                hint = 'Width outside the window'
                                break
                            case 'outerHeight':
                                hint = 'Height outside the window'
                                break
                            case 'credentialless':
                                hint = '"The window.credentialless read-only property returns a boolean that indicates whether the current document was loaded inside a credentialless <iframe>, meaning that it is loaded in a new, ephemeral context."'
                                break
                            case 'offscreenBuffering':
                                hint = 'Whether objects are drawn offscreen before being made visible to the user'
                                break
                        }
                        addProp(windowSect, prop, val, hint)
                    }
                    else reject('window.' + prop)
                })
                    ;['afterprint', 'appinstalled', 'beforeinstallprompt', 'beforeprint', 'beforeunload', 'blur', 'devicemotion', 'deviceorientation', 'deviceorientationabsolute',
                        'focus', 'gamepadconnected', 'gamepaddisconnected',
                        'hashchange',
                        'languagechange',
                        'offline',
                        'online',
                        'orientationchange',
                        'pagehide',
                        'pagereveal',
                        'pageshow',
                        'pageswap',
                        'resize',
                        'storage',
                        'vrdisplayactivate',
                        'vrdisplayconnect',
                        'vrdisplayconnect',
                        'vrdisplaydisconnect',
                        'vrdisplaypresentchange'
                    ].sort().forEach(function (e) {
                        var func
                        var sect
                        var hint
                        var a = addProp(windowSect, e + ' event', ' ')
                        switch (e) {
                            case 'devicemotion': if (typeof DeviceMotionEvent === 'function')
                                sect = addSect('', windowSect)
                                var acc = valIfcan('acceleration', DeviceMotionEvent.prototype, sect)
                                var accWithGravity = valIfcan('accelerationIncludingGravity', DeviceMotionEvent.prototype, sect)
                                var interval = valIfcan('interval', DeviceMotionEvent.prototype, sect)
                                var rotRate = valIfcan('rotationRate', DeviceMotionEvent.prototype, sect)
                                func = function (e) {
                                    if (acc) {
                                        var a = e.acceleration
                                        acc.textContent = '(' + a.x + ', ' + a.y + ', ' + a.z + ')'
                                    }
                                    if (accWithGravity) {
                                        a = e.accelerationIncludingGravity
                                        accWithGravity.textContent = '(' + a.x + ', ' + a.y + ', ' + a.z + ')'
                                    }
                                    if (interval) interval.textContent = e.interval
                                    if (rotRate) rotRate.textContent = '(' + e.rotationRate.alpha + ', ' + e.rotationRate.beta + ', ' + e.rotationRate.gamma + ')'
                                }
                                break
                            case 'deviceorientation':
                            case 'deviceorientationabsolute':
                                if (typeof DeviceOrientationEvent === 'function') {
                                    hint = 'New data from orientation sensor'
                                    sect = addSect('', windowSect)
                                    var absolute = valIfcan('absolute', DeviceOrientationEvent.prototype, sect)
                                    var alpha = addProp(sect, 'alpha', null, 'The number of degrees by which the device is being twisted around the center of the screen').nextElementSibling
                                    var beta = addProp(sect, 'beta', null, 'Rotation of the device around the X axis').nextElementSibling
                                    var gamma = addProp(sect, 'gamma', null, 'Rotation of the device around the Y axis').nextElementSibling
                                    func = function (e) {
                                        if (absolute) absolute.textContent = e.absolute
                                        alpha.textContent = String(e.alpha)
                                        beta.textContent = String(e.beta)
                                        gamma.textContent = String(e.gamma)
                                    }
                                }
                                break
                            /* case 'pageswap': if (typeof PageSwapEvent === 'function') {
                                 sect = addSect('', windowSect)
                                 // var subSect = addSect('activation:', sect)
                                 var entry = addProp(sect, 'entry', null).nextElementSibling
                                 var navigationType = addProp(sect, 'navigationType', null).nextElementSibling
                                 func = function(e) {
                                     debugger
                                     navigationType.textContent = e.navigationType
                                 }
                             }*/
                            case 'storage': if (typeof StorageEvent === 'function') {
                                sect = addSect('', windowSect)
                                var key = addProp(sect, 'key', null).nextElementSibling
                                var newValue = addProp(sect, 'newValue', null).nextElementSibling
                                var oldValue = addProp(sect, 'oldValue', null).nextElementSibling
                                var url = addProp(sect, 'url', null).nextElementSibling
                                func = function (e) {
                                    key.textContent = e.key
                                    newValue.textContent = e.newValue
                                    oldValue.textContent = e.oldValue
                                    url.textContent = e.url
                                }
                            }
                                break
                        }
                        addEvent(window, e, a, func)
                    })
                function valIfcan(prop, target, sect, val) { return prop in target ? addProp(sect, prop, val || ' ').nextElementSibling : null }
                var navProps = [
                    "appVersion",
                    "buildID",
                    "cookieEnabled",
                    "deviceMemory",
                    "doNotTrack",
                    "globalPrivacyControl",
                    "hardwareConcurrency",
                    "language",
                    'cpuPerformance',
                    'deprecatedRunAdAuctionEnforcesKAnonymity',
                    "maxTouchPoints",
                    "onLine",
                    "oscpu",
                    'languages',
                    "pdfViewerEnabled",
                    "platform",
                    "productSub",
                    "userAgent",
                    "webdriver"
                ].sort()
                var navigatorSect = addSect('navigator')
                navProps.forEach(function (o) {
                    if (o in navigator) {
                        var val = navigator[o]
                        if (o === 'doNotTrack') switch (val) {
                            case '0':
                            case 'no':
                                val = 'true'
                                break
                            case '1':
                            case 'yes':
                                val = 'false'
                                break
                            default:
                                val = 'unspecified'
                                break
                        }
                        else if (o === 'languages') val = val.join(', ')
                        var hint
                        switch (o) {
                            case 'deviceMemory':
                                val += 'GB'
                                break
                            case 'globalPrivacyControl':
                                hint = 'Does the user consent to their data being sold'
                                break
                            case 'hardwareConcurency':
                                hint = 'A number between 1 and the number of logical processors potentially available to the user agent'
                                break
                        }
                        addProp(navigatorSect, o, val, hint)
                    }
                    else reject('navigator.' + o)
                })
                /*if (navigator.getAutoplayPolicy) {
                    addProp(navigatorSect, 'autoplayPolicy', navigator.getAutoplayPolicy())
                }
                else reject('navigator.getAutoplayPolicy')*/
                if (navigator.connection) {
                    var nisect = addSect('network')
                    var connection = ['downlink', 'downlinkMax', 'effectiveType', 'rtt', 'saveData', 'type'].sort()
                    connection.forEach(defaultProp.bind(navigator.connection, nisect, 'navigator.connection.'))
                }
                else reject('navigator.connection')
                var pluginSect = addSect('plugins')
                if (navigator.plugins) [].forEach.call(navigator.plugins, function (n) {
                    var sect = addSect(n.name + ':', pluginSect)
                    // addProp(sect, 'description', n.description)
                    addProp(sect, 'name', n.name)
                    addProp(sect, 'types', [].map.call(n, function (o) { return o.type }).join(', '))
                })
                else reject('navigator.plugins')
                if (navigator.devicePosture) {
                    var postureSect = addSect('devicePosture')
                    defaultProp.call(navigator.devicePosture, postureSect, 'navigator.deviceposture', 'type')
                }
                else reject('navigator.devicePosture')
                if (navigator.gpu) {
                    var gpu = navigator.gpu
                    var gpusect = addSect('GPU')
                    if (gpu.wgslLanguageFeatures) {
                        addProp(gpusect, 'wgslLanguageFeatures', Array.from(gpu.wgslLanguageFeatures).join(', '))
                    }
                    else reject('GPU.wgslLanguageFeatures')
                    if (gpu.getPreferredCanvasFormat) {
                        addProp(gpusect, 'preferredCanvasFormat', gpu.getPreferredCanvasFormat())
                    }
                    else reject('GPU.getPreferredCanvasFormat')
                }
                else reject('navigator.gpu')
                if (navigator.preferences) {
                    var prefs = navigator.preferences
                    var prefSect = addSect('preferences')
                    !function () {
                        for (var i in prefs) {
                            addProp(prefSect, i, prefs[i].value)
                        }
                    }()
                }
                else reject('navigator.preferences')
                if (navigator.userAgentData) {
                    var uadata = navigator.userAgentData
                    var uasect = addSect('NavigatorUAData')
                    defaultProp.call(uadata, uasect, 'navigator.userAgentData.mobile', 'mobile')
                    defaultProp.call(uadata, uasect, 'navigator.userAgentData.platform', 'platform')
                    var uaBrandsSect = addSect('Brands:', uasect)
                    uadata.brands.forEach(function (o) {
                        addProp(uaBrandsSect, o.brand, 'Version ' + o.version)
                    })
                }
                else reject('navigator.userAgentData')
                if (location.ancestorOrigins) {
                    if (location.ancestorOrigins.length) {
                        var ancestorSect = addSect('location')
                        addProp(ancestorSect, 'ancestorOrigins', [].join.call(location.ancestorOrigins, ' '))
                    }
                }
                else reject('location.ancestorOrigins')

                var docSect = addSect('document')
                    ;['fullscreenEnabled', 'cookie', 'hidden',
                        //'preferredStyleSheetSet', 'prerendering', 
                        'referrer'].sort().forEach(defaultProp.bind(document, docSect, 'document'))
                if (document.hasStorageAccess || document.hasUnpartitionedCookieAccess) {
                    (document.hasStorageAccess || document.hasUnpartitionedCookieAccess).call(document).then(function (e) {
                        addProp(docSect, 'hasStorageAccess', e)
                    }, function (e) {
                        reject('document.hasStorageAccess/document.hasUnpartitionedCookieAccess', e.toString())
                    })
                }
                else reject('document.hasStorageAccess/document.hasUnpartitionedCookieAccess')
                if (document.featurePolicy) {
                    var features = addSect('featurePolicy:', docSect)
                    addProp(features, 'allowedFeatures', document.featurePolicy.allowedFeatures().join(', '))
                }
                else reject('document.featurePolicy')
                if (window.navigation) {
                    var navigationSect = addSect('navigation')
                        ;['canGoBack', 'canGoForward'].forEach(defaultProp.bind(navigation, navigationSect, 'navigation'))
                    if (navigation.entries) {
                        addProp(navigationSect, 'entries', navigation.entries().map(function (e) { return e.url }).join(', '))
                    }
                    else reject('navigation.entries')
                }
                else reject('navigation')
                if (window.performance) {
                    var perfSect = addSect('performance')
                    if (performance.navigation) {
                        addProp(perfSect, 'redirectCount', performance.navigation.redirectCount)
                    }
                    else reject('performance.navigation.redirectCount')
                        ;['timeOrigin', 'interactionCount'].sort().forEach(defaultProp.bind(performance, perfSect, 'performance'))
                    if (performance.eventCounts) {
                        addProp(perfSect, 'eventCounts', performance.eventCounts.size)
                    }
                    else reject('performance.eventCounts')
                    if (performance.now) {
                        addProp(perfSect, 'now', performance.now())
                    }
                    else reject('performance.now')
                    if (performance.memory) {
                        var perfMemSect = addSect('memory:', perfSect)
                        for (var m in performance.memory) addProp(perfMemSect, m, performance.memory[m])
                    }
                    else reject('performance.memory')
                }
                else reject('performance')
                if (window.screen) {
                    var screenSect = addSect('screen')
                        ;['availWidth', 'availHeight', 'colorDepth', 'height', 'width', 'isExtended', 'mozBrightness', 'mozBrightness', 'mozEnabled', 'pixelDepth']
                            .sort().forEach(defaultProp.bind(screen, screenSect, 'screen'))
                    if (screen.orientation) {
                        var screenOrientationSect = addSect('orientation:', screenSect)
                        addProp(screenOrientationSect, 'angle', screen.orientation.angle + '°')
                        addProp(screenOrientationSect, 'type', screen.orientation.type)
                    }
                    else reject('screen.orientation')
                }
                else reject('screen')
                if (window.viewport) {
                    var viewportSect = addSect('viewport')
                    var addSectForScreen = function (obj, key) {
                        addProp(this, key, obj[key])
                    }
                    viewport.segments.forEach(function (o, i) {
                        var s = addSect((i + 1) + '.', viewportSect)
                            ;['x', 'y', 'width', 'top', 'right', 'left', 'height', 'bottom'].sort().forEach(addSectForScreen.bind(s, o))
                    })
                }
                else reject('viewport')
                if (window.visualViewport === null || window.visualViewport) {
                    var visualViewportSect = addSect('visualViewport')
                    if (visualViewport) {
                        [
                            "height",
                            "offsetLeft",
                            "offsetTop",
                            "pageLeft",
                            "pageTop",
                            "scale",
                            "width"
                        ].forEach(defaultProp.bind(visualViewport, visualViewportSect, 'visualViewport'))
                    }
                }
                else reject('visualViewport')
                if (navigator.battery || navigator.getBattery) try {
                    var bat = navigator.battery
                    var batSect = addSect('battery')
                    var doBattery = function (bat) {
                        ['charging', 'chargingTime', 'dischargingTime', 'level'].sort().forEach(defaultProp.bind(bat, batSect, 'battery'))
                    }
                    if (bat) doBattery(bat)
                    else navigator.getBattery().then(doBattery, function (e) { reject('battery', e.toString()) })
                }
                    catch (e) {
                        reject('battery', e.toString())
                    }
                else reject('battery')
                if (navigator.virtualKeyboard) {
                    var virtualKeyboardSect = addSect('virtualKeyboard')
                    addProp(virtualKeyboardSect, 'overlaysContent', navigator.virtualKeyboard.overlaysContent)
                    var keyboardBoundRectSect = addSect('Bounding Rect:', virtualKeyboardSect)
                        ;['x', 'y', 'width', 'height', 'top', 'right', 'bottom', 'left'].sort().forEach(function (e) {
                            addProp(keyboardBoundRectSect, e, navigator.virtualKeyboard.boundingRect[e])
                        })
                }
                else reject('virtualKeyboard')
                if (navigator.keyboard) {
                    var keyboardSect = addSect('keyboard')
                    navigator.keyboard.getLayoutMap().then(function (e) {
                        addProp(keyboardSect, 'keys', Array.from(e.values()).sort().join(''))
                    })
                }
                else reject('navigator.keyboard')
            }
        }(document)
    </script>
    <footer>
        <p style="font-size: 2em;text-align: center;">I'll add more stuff later!</p>
    </footer>
</body>

</html>