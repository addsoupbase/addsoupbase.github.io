<!DOCTYPE html>
<html lang="en">

<head>

    <script type="speculationrules">{"prerender":[{"urls":["main.html"],"eagerness":"immediate"}]}</script>
    <meta charset="UTF-8">
    <meta http-equiv="content-language" content="en">
    <meta property="og:locale" content="en_US">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <meta name="description" content="Here I write diary entries about my life">
    <meta property="og:image:width" content="50">
    <meta property="og:image:height" content="50">
    <meta property="og:image:type" content="image/png">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://addsoupbase.github.io/cute-emojis/emojis/028220502816824156.gif">
    <meta property="og:url" content="https://addsoupbase.github.io/">
    <meta property="og:description" content="Here I write diary entries about my life">
    <meta property="og:title" content="addsoupbaseüçú - Diary">
    <meta property="og:site_name" content="addsoupbaseüçú - Diary">
    <meta name="twitter:title" content="Here I write diary entries about my life">
    <meta name="application-name" content="addsoupbaseüçú - Diary">
    <meta name="application-url" content="https://addsoupbase.github.io/">
    <meta name="twitter:url" content="https://addsoupbase.github.io/">
    <meta name="web_author" content="addsoupbase">
    <meta name="twitter:creator" content="@addsoupbase">
    <meta name="twitter:site" content="@addsoupbase">
    <meta name="twitter:creator:id" content="1799269566834454528">
    <meta name="twitter:site:id" content="1799269566834454528">
    <meta name="creator" content="addsoupbase">
    <meta name="designer" content="addsoupbase">
    <meta name="twitter:image" content="https://addsoupbase.github.io/cute-emojis/emojis/028220502816824156.gif">
    <meta name="twitter:image:width" content="50">
    <meta name="twitter:image:height" content="50">
    <meta name="msapplication-navbutton-color" content="#399a3e">
    <meta name="msapplication-TileColor" content="#399a3e">
    <meta name="msapplication-square150x150logo" content="./apple-touch-icon-152x152.png">
    <meta name="msapplication-square310x310logo" content="./apple-touch-icon-180x180.png">
    <meta name="msapplication-square70x70logo" content="./apple-touch-icon-72x72.png">
    <meta name="msapplication-wide310x150logo" content="./apple-touch-icon-180x180.png">
    <meta name="msapplication-TileImage" content="./apple-touch-icon-180x180.png">
    <meta name="msapplication-starturl" content="https://addsoupbase.github.io/">
    <meta name="msapplication-tooltip" content="addsoupbaseüçú - Diary">
    <meta name="prism:alternateTitle" content="addsoupbaseüçú - Diary">
    <meta name="twitter:card" content="summary">
    <meta name="thumbnail" content="https://addsoupbase.github.io/cute-emojis/emojis/028220502816824156.gif">
    <meta property="profile:username" content="addsoupbase">
    <!--summary_large_image,summary,app,or player -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="robots" content="index">
    <meta name="theme-color" content="#399a3e">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="author" content="addsoupbase">
    <link rel="canonical" href="https://addsoupbase.github.io/">
    <script
        type="application/ld+json">{"@context":"https://schema.org","@type": "WebSite","name":"addsoupbase","url":"https://addsoupbase.github.io/","description":"Here I write diary entries about my life","author":{"@type": "Person","name":"addsoupbase","sameAs":["https://twitter.com/addsoupbase"]},"mainEntityOfPage":{"@type":"WebPage","@id":"https://addsoupbase.github.io/"},"image":{"@type":"ImageObject","url":"https://addsoupbase.github.io/cute-emojis/emojis/028220502816824156.gif","width":50,"height":50}}</script>
    <link rel="apple-touch-icon" sizes="57x57" href="./apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon-180x180.png">
    <meta name="mobile-web-app-capable" content="no">
    <meta name="apple-mobile-web-app-capable" content="no">
    <!--^ yes if the site has stuff like back buttons-->
    <meta name="apple-mobile-web-app-title" content="addsoupbaseüçú - Diary">
    <link rel="apple-touch-startup-image" href="favicon.ico">
    <script blocking="render" defer src="./css.js"></script>
    <link rel="stylesheet" href="styles.css">
    <title>addsoupbaseüçú - Diary</title>
    <link rel="preload" href="media/meloetta1.png" as="image">
    <link rel="preload" href="media/meloetta2.png" as="image">
    <link rel="preload" href="media/meloetta3.png" as="image">

    <!--https://wiki.whatwg.org/wiki/MetaExtensions-->
    <!--[if IE]><script>alert('Please update your browser')</script><![endif]-->
</head>

<body class="cute-green" id="main" style="justify-items: center">
    <script src="fallback.js"></script>
    <template id="template">

        <main class="center " style="margin: 0;width:100%">
            <a accesskey="b" class="cute-green-button back" href="main.html" role="button" rel="prev">Back</a>
            <!-- <span> Scrolling could reveal more!</span> -->

            <div class="center" id="diary-container" style="display:contents;justify-items: center;">
                <time>
                    <input class="cute-green" style="font-size:20px;margin:20px;" id="diary-heading" type="date"
                        min="2025-04-07">
                </time>
                <section id="diary" class="cute-blue" style="width: 746px;  place-self: center;">
                    <div id="walking"></div>
                    <h2 id="invalid" hidden>No entry for today &lpar;yet!&rpar;
                        <img style="image-rendering: pixelated" alt="tangled speech balloon" height="34"
                            src="./cute-emojis/emojis/1143313874943234058.gif">
                    </h2>
                    <h2 id="error" hidden>
                        <img alt="error" height="50" src="./cute-emojis/emojis/1242581617084465222.gif">
                        <br>
                        <samp style="color:#631414;">Error
                        </samp>
                    </h2>
                    <iframe aria-relevant="all" aria-live="assertive" id="display" name="Diary" title="Diary"
                        style="width: 100%;height: 100%;border: none;"></iframe>
                    <script>
                        document.getElementById('display').addEventListener('load', function (e) {
                            var window = e.target.contentWindow
                            if (e.target.src === 'about:blank') {
                                e.stopImmediatePropagation()
                                window.document.open().write('<style>@font-face {font-family: \'Choco\';font-display: swap;src: local(\'Choco cooky\'), local(\'Chococooky\'), url(\'https://addsoupbase.github.io/media/Chococooky.woff2\') format(\'woff2\'),url(\'https://addsoupbase.github.io/media/Chococooky.woff\') format(\'woff\');font-weight: normal;font-style: normal;} </style><h2 id="invalid" style="text-align:center;font-family:\'Choco\'">No entry for today &lpar;yet!&rpar;<img style="image-rendering: pixelated" alt="tangled speech balloon" height="34"src="https://addsoupbase.github.io/cute-emojis/emojis/1143313874943234058.gif"></h2>')
                                window.document.close()
                            }
                            else try {
                                if (window.document.all.length < 21)
                                    e.target.setAttribute('src', 'about:blank')
                            }
                            catch (_) {
                                e.target.setAttribute('src', 'about:blank')
                            }
                        })
                    </script>
                </section>
                <div style="justify-self: center;justify-content:center;display: flex;    align-items: end;">
                    <input accesskey="p" id="prev" type="image" title="Turn to previous page" alt="Back"
                        style="transform:scaleX(-1)" src="./cute-emojis/emojis/1321091969635848294.gif">
                    <button class="cute-green-button" id="toToday">Go to today</button>
                    <input accesskey="n" id="next" type="image" title="Turn to next page" alt="Forward"
                        src="./cute-emojis/emojis/1321091969635848294.gif">
                </div>
            </div>
        </main>
    </template>
    <style>
        .meloetta {
            --zoom: 0.75;
            --tap-hightlight-color: rgb(0 0 0 0%) !important;
            transform-origin: 77px 91px;
            transform: scale(0.25, 0.3) translateY(-240px);
            image-rendering: auto;
        }

        .meloetta.disturbed {
            transform: scale(0.3, 0.3) translate(-50px, -350px);
            cursor: default
        }

        .meloetta.awake {
            transform: scale(0.3, 0.3) translate(30px, -320px);
            cursor: default;
            pointer-events: none;
        }

        img-sprite {
            cursor: pointer;
            display: block;
            position: relative
        }
    </style>
    <script type="module">
        import $ from './yay.js'
        import ran from './random.js'
        import * as h from './handle.js'

        function animateThing() {
            let sizeMult = 1.3
            let meloetta = $(`<img-sprite title="Zzz" class="meloetta" style="image-rendering:${top === window ? 'pixelated' : 'auto'};" duration="600" index="0" src="media/meloetta1.png" width="${160 * sizeMult}" height="${216 * sizeMult}" rows="1" cols="2"></img-sprite>`)
                .on({
                    _click() {
                        this.setAttr({
                            cols: 2,
                            rows: 8,
                            src: '/media/meloetta2.png',
                            width: 230 * sizeMult,
                            height: 300 * sizeMult,
                            duration: 140,
                            title: ''
                        })
                            .classList.add('disturbed')
                        let i = 3
                        this.animate([{ translate: '0px 10px', }, { translate: '0px -30px', }], { iterations: 2, duration: 330, fill: 'forwards', easing: 'ease', direction: 'alternate' })
                        this.on({
                            animationiteration() {
                                if (i--) return
                                this.off('animationiteration')
                                    .setAttr({
                                        src: 'media/meloetta3.png',
                                        cols: 7,
                                        width: 115 * sizeMult,
                                        height: 270 * sizeMult
                                    })
                                    .classList.add('awake')
                                let thing = () => {
                                    setTimeout(thing, ran.range(500, 2000))
                                    this.setAttr({
                                        index: ran.frange(0, 8)
                                    })
                                }
                                setTimeout(thing, 1000)
                            }
                        })
                    }
                })
            walking.push(meloetta)

        }
        h.on(document, {
            '%&DOMContentLoaded'() { }
        })
        $.setup()
        let { toToday, invalid, error, next, prev, 'diary-heading': diaryHeading, display: currentThingy, walking } = $.id
        if (CSS.supports('left', 'anchor(left)')) animateThing()

        // h.on(window, {
        // _load() {
        // setTimeout(async () => {
        // await info.animate([{opacity:'',opacity:0}],{
        // duration: 500,
        // easing:'ease-out'
        // }).finished
        // info.hide(2)
        // }, 7000)
        // }
        // })
        let today = new Date()
        diaryHeading
            .on({
                change() {
                    if (!this.value?.trim()) return
                    let v = this.value.split('-')
                    v[2] = (+v[2] + 1).toString().padStart(2, 0)
                    today = new Date(v.join('-'))
                    goBy(0)
                    setEntry(getDate())
                }
            })
            .setAttr({
                max: getThat(today)
            })

        function getDate() {
            return today.toLocaleDateString('en-US')
        }

        function goBy(a) {
            // We need the temporal api quick...
            today.setDate(today.getDate() + a)
            if (today.getDate() <= 7 && today.getFullYear() <= 2025 && today.getMonth() <= 3) {
                // This is before i made any entries
                prev.hide(2)
                    .setAttr({ disabled: true })
            } else {
                prev.show(2).setAttr({ disabled: false })
            }
            if (getDate() === new Date().toLocaleDateString('en-US') || today >= new Date) {
                // After today
                next.hide(2).setAttr({ disabled: true })
            } else { next.show(2).setAttr({ disabled: false }) }
        }

        toToday.on({
            '%&click'() {
                if (!canMove) return
                today = new Date()
                goBy(-0)
                setEntry(getDate())
            }
        })
        next.on({
            '%&click'() {
                if (!canMove) return
                goBy(1)
                setEntry(getDate())
            }
        })
        prev.on({
            '%&click'() {
                if (!canMove) return
                goBy(-1)
                setEntry(getDate())
            }
        })
        // function getMSThingy() {
        // return Date.UTC((new Date).getFullYear(), (new Date).getMonth(), (new Date).getDate())
        // }
        let canMove = false
        currentThingy.on({
            '%!load'() {
                canMove = true
                if (!this.contentWindow.document.querySelector('[name="author"][content="addsoupbase"]')) {
                    invalid.show().fadeIn()
                    // this.setAttribute('src', 'about:blank')
                    //will work good enough i think
                } else {
                    this.fadeIn()
                }
                this.parent.isBusy = false
            }
        })

        function getThat(d) {
            return `${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, 0)}-${d.getDate().toString().padStart(2, 0)}`
        }

        async function setEntry(date) {
            let d = new Date(date)
            let t = getThat(d)
            diaryHeading.value = t
            currentThingy.hide(3)
            error.hide()
            currentThingy.parent.isBusy = true
            invalid.hide()
            canMove = false
            let url = `./entries/${date.replace(/\//g, '_')}`
            // currentThingy.hide(2)
            try {
                // let req = (await fetch(url))
                // if (!req.ok) {
                // if (req.status === 404) {
                // invalid.fadeIn()
                // invalid.show()
                // }
                // else {
                // error.fadeIn()
                // error.show()
                // }
                // }
                // else {
                currentThingy.setAttr({ src: url })
                // currentThingy.contentWindow.location.assign(url)
                await new Promise((resolve, reject) => {
                    currentThingy.onerror = reject
                    currentThingy.onload = resolve
                })
                currentThingy.onerror = currentThingy.onload = null
                // }
            } catch (e) {
                currentThingy.onerror = currentThingy.onload = null
                reportError(e)
                error.fadeIn()
                error.show()
            } finally {
                canMove = true
                currentThingy.parent.isBusy = false
            }
        }

        let { diary, main: m } = $.id
        goBy(-1)
        setEntry(getDate())
    </script>
    <!-- if something somehow goes wrong, and this function is fired successfully -->
    <script>(document.addEventListener||document.attachEvent).call(document,"DOMContentLoaded",function(){"use strict";if("undefined"==typeof h){var e=new XMLHttpRequest;e.open("GET","./oldhandle.js"),e.onload=function(){Function(e.responseText)();var t=function(e){e.style.visibility="hidden",e.setAttribute("disabled","disabled")},n=function(e){e.style.visibility="visible",e.removeAttribute("disabled")},i=document.getElementById("toToday"),a=document.getElementById("diary-heading"),l=function(){var e=new Date;d.getDate()>=e.getDate()&&d.getMonth()>=e.getMonth()?t(g):n(g),7>=d.getDate()&&3>=d.getMonth()?t(s):n(s);var i=[d.getMonth()+1,d.getDate(),d.getFullYear()].join("_"),l=""+d.getDate(),c=""+(d.getMonth()+1);1===c.length&&(c=0+c),1===l.length&&(l=0+l),o.src="./entries/"+i,a.value=[d.getFullYear(),c,l].join("-")},o=document.getElementById("display"),d=new Date,s=document.getElementById("prev"),g=document.getElementById("next");a.setAttribute("max",o.src);var c=function(){if(this.value.trim()){for(var e=this.value.split("-"),t=e[2]=(+e[2]).toString();t.length<2;)t=0+t;d=new Date(e.join("-")),l()}};h.on(a,{change:c,textInput:c}),h.on(s,{click:function(){d.setDate(d.getDate()-1),l()}}),h.on(g,{click:function(){d.setDate(d.getDate()+1),l()}}),h.on(i,{click:function(){d=new Date,l()}}),i.click()},e.send()}});</script>
    <script async defer src="silence.js"></script>
</body>

</html>